# 変数についての注意
テンプレートに渡す配列として以下の文字列は使用できません。
* [ORTHIABLOCKOBJECT]

# 関数について
このテンプレートエンジンには2つのタイプの関数が存在します。
* 組み込み関数
* ユーザー定義関数

ここでは
* 組み込み関数について
* 関数定義の方法について
を説明します。

# 組み込み関数について
## 組み込み関数とは？
組み込み関数とは、テンプレートエンジンにあらかじめ用意されている関数です。  
組み込み関数は値を挟み込むだけのものの他、ifやforeach等の制御構文も用意されています。

## ブロック関数とワンライン関数
関数には2種類存在しており、ブロック関数とは  
* 複数行をブロックとして処理
* 「if」「endif」のように「関数名」「end+関数名」のような関係になっているもの
です。主に制御構文に使用されます。  
対するワンライン関数とは、文字通り一行で処理が終了する関数のことで、何か値を挟み込んだり演算処理をさせる際に使用される関数です。  

## ワンライン関数
ここでは、ワンライン関数の解説をします。  
### csrf_token
* 引数：なし
* 返り値：valueにUUIDを挟み込んだinputタグ（nameは「csrf_token」）
* 備考：セッションには「csrf_token」という名前でvalueに挟まれたものと同じUUIDが格納されています。  
この関数は、主にcsrf(クロスサイトリクエストフォージェリ)対策のために使用する関数です。  
フォーム送信時にUUIDを検証することで送信された値の安全性を高めることができます。  
  
### convey
* 引数：Templateディレクトリから該当ファイルまでのパス
* 返り値：取得してきたテンプレートを解析した値
* 備考：なし
この関数は、convey（持ってくる）の名前の通り、テンプレート内で他ファイルのパーツを持ってきたい場合に使用します。  
例えば、「ここに別のテンプレートの内容を挟みたい」といったような場合に使用します。  
後ほど説明する「継承」とは違い、ただ別ファイルの内容をそのまま張り付けるだけのシンプルな関数です。  

### break
* 引数：なし
* 返り値：「ORTHIASIGNAL@STOP」の文字列
* 備考：なし
この関数は、主にループ文を停止させる際に利用します。  
「ORTHIASIGNAL@XXX」といった形の文字列は、本テンプレートエンジンでは「関数から関数への命令」という特別な形で使用されており、この場合は「ループ系関数に停止命令を渡す」といった動作になります。  

## ブロック関数
ここでは、ブロック関数の解説をします。  

### if - elseif(またはelif) - else - endif
* 引数：条件(else、endif以外)
* 返り値：bool(引数の条件が真であればtrue、偽であればfalse)
* 備考：なし  
この関数は条件分岐に使用する制御構文です。  
通常のPHPのif文と同じであるため、説明は省きます。  

### comment - endcomment
* 引数：なし
* 返り値：bool値（どんな時でも必ずtrueを返却）
* 備考：なし
この関数で文字を囲むことで、出力されたhtmlには囲まれた文字列が表示されなくなります。

### for - endfor
* 引数：phpのforと同様
* 返り値：ループ後の値
* 備考：なし
この関数はループに使用する制御構文です。
通常のPHPのfor文と同じであるため、説明は省きます。  

### foreach - endforeach
* 引数：PHPのforeachと同様
* 返り値：ループ後の値
* 備考：なし
この関数はループに使用する制御構文です。  
通常のPHPのforeach文と同じであるため、説明は省きます。

## 継承用関数
これらの関数は、テンプレートの継承時に使用する関数です。

### parts_block - endparts_block
* 引数：任意のパーツ名
* 返り値：なし
* 備考：なし
この関数で囲んだ部分は、対応する親テンプレートのpaste_here関数の部分に貼り付けられます。  

### paste_here
* 引数：parts_blockで指定したパーツ名
* 返り値：なし
* 備考：なし
この関数は、引数で渡されたパーツ名と同じパーツ名を持つ「parts_block」関数を呼び出して貼り付けます。  

### assembleTo
* 引数：親テンプレートファイル名
* 返り値：なし
* 備考：ファイルの一番最後で呼び出す
この関数は、親ファイルとなるテンプレートを呼び出して、子ファイル（この関数の呼び出し元）のparts_blockと親ファイルのpaste_hereを解析、それぞれに変数をバインドして返却します。  